base: "ubuntu/precise"

apt:
  packages:
    - python-dev
    - python-pip
    - git

python27:
  packages:
    - pip==1.5.6
    - virtualenv==1.11.6

after_install:
  - virtualenv -p /usr/bin/python2.7 /smithy-venv
  - /smithy-venv/bin/pip install smithy-builder smithy-git-utils
  - useradd -d /smithy-home -s /bin/bash -U smithy
  - chown -R smithy:smithy /usr/local /smithy-venv

env:
  'PATH': '/smithy-venv/bin:/usr/local/bin:/usr/bin:/bin'

add:
  config.py: /etc/builder.config.py

cmd: [ '/bin/bash' ]
